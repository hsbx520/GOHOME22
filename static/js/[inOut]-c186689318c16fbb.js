(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1990],{26100:function(e,t,n){"use strict";n(93981);var r=n(29541);t.Z=function(e){var t=e.className,n=void 0===t?"":t,o=e.width,i=void 0===o?8:o,a=e.height,s=void 0===a?7:a;return(0,r.jsx)("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",width:i,height:s,fill:"none",viewBox:"0 0 8 7",children:(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.647 3.674H.69c-.91 0-.91-1.38 0-1.38h4.957L3.89.537c-.659-.659.314-1.631.973-.972l2.949 2.949c.25.25.25.69 0 .972l-2.95 2.95c-.658.627-1.63-.346-.972-.973l1.757-1.788z",clipRule:"evenodd"})})}},1125:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return X},default:function(){return $}});var r=n(38039),o=n(23857),i=n(93981),a=n(72215),s=n(72997),l=n(99632),u=n(84382),c=n.n(u),d=n(81652),f=n(86946),m=n(23321),p=n(97973),h=n(21029),x=n(4707),v=n(25224),g=n(91596),y=n(76021),w=n(23877);function b(e){return function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}({},e)}var j=n(72775),N=n(33219),k=6e4,_=1440,T=43200,Z=525600;function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,N.Z)(2,arguments);var r=n.locale||j.Z;if(!r.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var o=(0,y.Z)(e,t);if(isNaN(o))throw new RangeError("Invalid time value");var i,a,s=b(n);s.addSuffix=Boolean(n.addSuffix),s.comparison=o,o>0?(i=(0,w.Z)(t),a=(0,w.Z)(e)):(i=(0,w.Z)(e),a=(0,w.Z)(t));var l,u=null==n.roundingMethod?"round":String(n.roundingMethod);if("floor"===u)l=Math.floor;else if("ceil"===u)l=Math.ceil;else{if("round"!==u)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");l=Math.round}var c,d=a.getTime()-i.getTime(),f=d/k,m=(0,g.Z)(a)-(0,g.Z)(i),p=(d-m)/k;if("second"===(c=null==n.unit?f<1?"second":f<60?"minute":f<_?"hour":p<T?"day":p<Z?"month":"year":String(n.unit))){var h=l(d/1e3);return r.formatDistance("xSeconds",h,s)}if("minute"===c){var x=l(f);return r.formatDistance("xMinutes",x,s)}if("hour"===c){var v=l(f/60);return r.formatDistance("xHours",v,s)}if("day"===c){var I=l(p/_);return r.formatDistance("xDays",I,s)}if("month"===c){var P=l(p/T);return 12===P&&"month"!==n.unit?r.formatDistance("xYears",1,s):r.formatDistance("xMonths",P,s)}if("year"===c){var M=l(p/Z);return r.formatDistance("xYears",M,s)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function P(e,t){return(0,N.Z)(1,arguments),I(e,Date.now(),t)}var M=n(78495),E=n(60253),A=n(69077),C=n(94358),O=n(54138),D=n(30639),S=n(32571),H=n(26100),R=n(89140),L=n(29541),B=function(e){var t=e.transaction,n=t.inputAmount,r=t.inputMint,o=t.outputMint,s=t.outputAmount,l=t.txHash,u=t.blockTime,c=(0,a.Bn)().getTokenInfo,d=(0,D.T)(),f=(0,R.bl)(u),m=(0,i.useMemo)((function(){return c(r)}),[c,r]),p=(0,i.useMemo)((function(){return c(o)}),[c,o]),h=function(){d(m,p)},g=(0,i.useMemo)((function(){return m&&p?{inAmount:(0,v.Z0)(s,p.decimals),outAmount:(0,v.Z0)(n,m.decimals)}:null}),[n,m,s,p]),y=f instanceof Date&&!isNaN(f.getTime());return(0,L.jsxs)("div",{className:"flex w-full items-center justify-between overflow-hidden rounded-lg bg-history-item p-2 sm:px-4 sm:py-3",children:[(0,L.jsxs)("div",{className:"hidden flex-col gap-y-1 sm:flex",children:[(0,L.jsxs)("div",{className:"flex",children:[(0,L.jsx)(C.Z,{content:x.ag._({id:"Yyubcm"}),children:(0,L.jsxs)("button",{onClick:function(){h()},className:"group/tokens flex cursor-pointer -space-x-2",children:[(0,L.jsx)("div",{className:"rounded-full border border-transparent group-hover/tokens:border-v2-primary/50 group-hover/tokens:shadow-swap-input-dark",children:(0,L.jsx)(A.Z,{info:m,height:20,width:20})}),(0,L.jsx)("div",{className:"rounded-full border border-transparent group-hover/tokens:border-v2-primary/50 group-hover/tokens:shadow-swap-input-dark",children:(0,L.jsx)(A.Z,{info:p,height:20,width:20})})]})}),(0,L.jsxs)("div",{className:"ml-2 flex items-center gap-x-2 text-xs text-v2-lily/70",children:[(0,L.jsxs)("span",{children:[v.uf.format(n)," ",(null===m||void 0===m?void 0:m.symbol)||""]}),(0,L.jsx)("div",{className:"fill-current text-v2-lily/30",children:(0,L.jsx)(H.Z,{})}),(0,L.jsxs)("span",{children:[v.uf.format(s)," ",(null===p||void 0===p?void 0:p.symbol)||""]})]})]}),g&&p&&m?(0,L.jsx)(E.Z,{className:"text-xs",textClassName:"!min-w-[9rem]",inputPair:p,outputPair:m,inputAmount:g.inAmount,outputAmount:g.outAmount}):null]}),(0,L.jsxs)("div",{className:"flex flex-col gap-y-1 sm:hidden",children:[(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[(0,L.jsx)(C.Z,{content:x.ag._({id:"Yyubcm"}),children:(0,L.jsxs)("button",{className:"group/tokens flex cursor-pointer flex-col space-y-0.5 rounded-full border border-transparent",onClick:function(e){e.stopPropagation(),h()},children:[(0,L.jsx)("div",{className:"rounded-full border border-transparent group-hover/tokens:border-v2-primary/50 group-hover/tokens:shadow-swap-input-dark",children:(0,L.jsx)(A.Z,{info:m,height:20,width:20})}),(0,L.jsx)("div",{className:"rounded-full border border-transparent group-hover/tokens:border-v2-primary/50 group-hover/tokens:shadow-swap-input-dark",children:(0,L.jsx)(A.Z,{info:p,height:20,width:20})})]})}),(0,L.jsxs)("div",{className:"flex flex-col items-start space-y-2 text-xs text-v2-lily/70",children:[(0,L.jsxs)("p",{className:"text-left",children:[v.uf.format(n)," ",(null===m||void 0===m?void 0:m.symbol)||""]}),(0,L.jsxs)("p",{className:"text-left",children:[v.uf.format(s)," ",(null===p||void 0===p?void 0:p.symbol)||""]})]})]}),g&&p&&m?(0,L.jsx)(E.Z,{className:"text-xs",textClassName:"!min-w-[9rem]",inputPair:p,outputPair:m,inputAmount:g.inAmount,outputAmount:g.outAmount}):null]}),(0,L.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,L.jsx)("div",{className:"flex items-center justify-end gap-x-1 lg:gap-x-2",children:(0,L.jsx)(C.Z,{placement:"bottom-start",content:x.ag._({id:"LLapxL"}),children:(0,L.jsx)(O.Z,{txid:l,className:"flex h-7 w-7 items-center justify-center rounded-full border border-v2-lily/10 p-2",children:(0,L.jsx)(S.Z,{width:10,height:10})})})}),!!f&&y&&(0,L.jsx)("span",{className:"text-right text-xs font-normal text-v2-lily/30",children:P(f,{locale:M.Z})})]})]})},q=function(){var e=(0,d.Os)().connected,t=(0,d.Bn)(),n=t.getTokenInfo,r=t.requestTokenInfo,o=t.requestOnChainTokenInfo,a=(0,i.useState)(0),s=a[0],u=a[1],x=(0,i.useState)(!1),v=x[0],g=x[1],y=(0,h.Z)(),w=y.data,b=y.isLoading,j=(0,i.useState)([]),N=j[0],k=j[1],_=(0,i.useMemo)((function(){return w?Math.ceil(w.length/5):0}),[w]),T=(0,m.Y)({pageIndex:s,setPageIndex:u,pageCount:_}),Z=T.pager,I=T.gotoPage,P=T.canPreviousPage,M=T.canNextPage;return(0,i.useEffect)((function(){if(!(!0===b&&(w||[]).length>0)){var e=(null===w||void 0===w?void 0:w.slice(5*s,5*(s+1)))||[];g(!1);var t=function(){var t=(0,l.Z)(c().mark((function t(){var i,a,s,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=new Set,e.forEach((function(e){i.add(e.inputMint),i.add(e.outputMint)})),a=Array.from(i).filter(Boolean),t.next=6,r(a);case 6:if(s=t.sent,!((l=a.filter((function(e){return void 0===n(e)})).filter((function(e){return void 0===s.find((function(t){return t.address===e}))}))).length>0)){t.next=11;break}return t.next=11,o(l);case 11:k(e),g(!0),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.error("Error fetching token infos",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();t()}}),[n,w,b,s,o,r]),e?!b&&w&&0===w.length?(0,L.jsx)("div",{className:"flex h-[150px] w-full items-center justify-center rounded-lg border border-v2-lily/5",children:(0,L.jsx)("p",{className:"text-sm text-v2-lily/50",children:"No swap history"})}):(0,L.jsxs)("div",{className:"flex w-full flex-col lg:gap-y-2",children:[(0,L.jsxs)("div",{className:"relative flex w-full flex-col gap-y-2",children:[!v&&(0,L.jsx)("div",{className:"absolute left-0 top-0 z-20 h-full w-full bg-black/10 backdrop-blur-sm"}),(N||[]).map((function(e){var t=e.inputAmount,n=e.outputAmount,r=e.txHash;return t||n?(0,L.jsx)(B,{transaction:e},r):null}))]}),N&&N.length>0&&_>0?(0,L.jsx)(p.Z,{canPreviousPage:P,gotoPage:I,pageIndex:s,pager:Z,canNextPage:M}):null]}):(0,L.jsxs)("div",{className:"flex h-[200px] w-full flex-col items-center justify-center space-y-2 rounded-lg border border-v2-lily/5",children:[(0,L.jsx)("p",{className:"text-sm text-v2-lily/50",children:"View History"}),(0,L.jsx)("div",{className:"h-10 w-40",children:(0,L.jsx)(f.Z,{size:"sm"})})]})},z=n(29863),F=n(99415),Y=n(40377),V=n(15564),X=!0,$=function(){var e=(0,V.V)(),t=(0,r.Z)(e,2),n=t[0],l=t[1],u=(0,Y.hv)().appDomain,c=(0,a.gZ)().fetchTokenAccounts,d=(0,D.T)();(0,i.useEffect)((function(){n&&l&&c([n.address,l.address,F.W4])}),[n,l,c]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(o.PB,{title:"Instant"}),(0,L.jsxs)("div",{className:"z-10 w-full",children:[(0,L.jsx)(z.Z,{inToken:n,outToken:l,onTokenChange:function(e,t){d(e,t)}}),(0,Y.mD)(u)&&u.container.leftContainerHistories&&u.container.leftContainerHistories.current&&(0,s.createPortal)((0,L.jsx)(q,{}),u.container.leftContainerHistories.current),(0,Y.mD)(u)&&u.container.bottomPageHistories&&u.container.bottomPageHistories.current&&(0,s.createPortal)((0,L.jsx)(q,{}),u.container.bottomPageHistories.current)]})]})}},76471:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/swap/[inOut]",function(){return n(1125)}])},96805:function(e,t,n){var r=n(11805);!function(){var t={189:function(){!function(e,t){"use strict";if(!e.setImmediate){var n,o=1,i={},a=!1,s=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?n=function(e){r.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&d(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){d(e.data)},n=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;n=function(t){var n=s.createElement("script");n.onreadystatechange=function(){d(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():n=function(e){setTimeout(d,0,e)},l.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return i[o]=a,n(o),o++},l.clearImmediate=u}function u(e){delete i[e]}function c(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(undefined,n)}}function d(e){if(a)setTimeout(d,0,e);else{var t=i[e];if(t){a=!0;try{c(t)}finally{u(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof n.g?this:n.g:self)}};"undefined"!==typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");t[189](),e.exports={}}()},15636:function(e,t,n){!function(){var t={845:function(e,t,r){var o="undefined"!==typeof n.g&&n.g||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(505),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof n.g&&n.g.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof n.g&&n.g.clearImmediate||this&&this.clearImmediate},505:function(e){"use strict";e.exports=n(96805)}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}},a=!0;try{t[e].call(i.exports,i,i.exports,o),a=!1}finally{a&&delete r[e]}return i.exports}o.ab="//";var i=o(845);e.exports=i}()},67785:function(e,t){"use strict";function n(e){return"AbortError"===(null==e?void 0:e.name)}async function r(e,t,r){const o=e.getReader();let i=!1,a=!1;function s(){a=!0,t.off("close",s),i||(i=!0,o.cancel().catch((()=>{})))}t.on("close",s);try{for(;;){const{done:e,value:n}=await o.read();if(i=e,e||a)break;n&&(t.write(n),null==t.flush||t.flush.call(t))}}catch(l){if(!n(l))throw l}finally{t.off("close",s),i||o.cancel().catch((()=>{})),r&&await r,a||t.end()}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{isAbortError:function(){return n},pipeReadable:function(){return r}})},43396:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[5579,8816,9863,9774,2888,179],(function(){return t=76471,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[inOut]-c186689318c16fbb.js.map